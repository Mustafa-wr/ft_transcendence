{% extends 'base.html' %}
{% load static %}

{% with is_home_page=True %}
	{% block content %}
    <div class="page-content bg-black text-light text-center" style="min-height: 100%;">
        <fieldset class="border rounded-5 px-3 text-light text-break text-center d-inline-block">
            <legend class="display-6 float-none w-auto p-3" style="color:fuchsia;">The Game</legend>
            <p>Pong is a 2D game simulating table tennis.</p>
            <p>Players control paddles to hit the ball.</p>
            <p>Points are earned when one fails to return the ball to the other side.</p>
            <p>The goal is to reach 11 points before the opponent.</p>
        </fieldset>
        <br><br>
        <fieldset class="border rounded-5 px-3 text-light text-break text-center d-inline-block">
            <legend class="display-6 float-none w-auto p-3" style="color:fuchsia;">Ready?</legend>
            <a id="tournament" class="btn btn-info mb-3">Tournament</a>
            <a id="multi_player" class="btn btn-info mb-3">2 Players</a>
            <a id="multi_player4" class="btn btn-info mb-3">4 Players</a>
            <br><br>
        </fieldset>
    </div>
		<script> 
			// Check if the URL contains a code and redirect to the home page without query parameters
		if (window.location.href.includes("?code=")) {
			window.history.replaceState({}, document.title, "/home"); // Remove query parameters
		}
		const refreshFlag = document.getElementById('refreshFlag');
		if(!refreshFlag){
			window.location.reload();
		}
		console.log("Hello");
		</script>
	{% endblock %}
{% endwith %}


{% comment %} <script>
    // Function to load content dynamically
    function loadContent(url) {
        fetch(url)
            .then(response => response.text())
            .then(data => {
                document.getElementById('contents').innerHTML = data;
            })
            .catch(error => console.error('Error:', error));
    }

    // Event listeners for the links
    document.getElementById('playVsComputer').addEventListener('click', function(event) {
        event.preventDefault();
        loadContent("{% url 'game' %}");
    });

    document.getElementById('playTournament').addEventListener('click', function(event) {
        event.preventDefault();
        loadContent("{% url 'game' %}");
    });

    document.getElementById('playVsOnlinePlayer').addEventListener('click', function(event) {
        event.preventDefault();
        loadContent("{% url 'game' %}");
    });

    // Check for query parameters and remove them
    if (window.location.href.includes("?code=")) {
        window.history.replaceState({}, document.title, "/");
    }
</script> {% endcomment %}